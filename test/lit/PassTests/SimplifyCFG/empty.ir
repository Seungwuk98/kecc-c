// RUN: kecc-opt %s --canonicalize-constant --cfg-empty | FileCheck %s

fun i32 @foo () {
// CHECK: fun i32 @foo ()
init:
  bid: b0
  allocations: 
// CHECK-NEXT: init:
// CHECK-NEXT:   bid: b0
// CHECK-NEXT:   allocations: 

block b0:
  j b1(42:i32)
// CHECK-LABEL: block b0:
// CHECK-NEXT:   j b1(42:i32)

block b1:
  %b1:p0:i32
  j b3()
// CHECK-LABEL: block b1:
// CHECK-NEXT:   %b1:p0:i32
// CHECK-NEXT:   ret 37:i32

block b3:
  ret 37:i32
// CHECK-LABEL: block b3:
// CHECK-NEXT:   ret 37:i32
}

fun i32 @bar () {
// CHECK-LABEL: fun i32 @bar ()
init:
  bid: b0
  allocations: 
// CHECK-NEXT: init:
// CHECK-NEXT:   bid: b0
// CHECK-NEXT:   allocations: 

block b0:
  j b1(42:i32)
// CHECK-LABEL: block b0:
// CHECK-NEXT:   j b1(42:i32)

block b1:
  %b1:p0:i32
  br 1:i1, b2(), b2()
// CHECK-LABEL: block b1:
// CHECK-NEXT:   %b1:p0:i32
// CHECK-NEXT:   br 1:i1, b3(), b3()

block b2:
  j b3()
// CHECK-LABEL: block b2:
// CHECK-NEXT:   j b3()

block b3:
  %b3:i0:i1 = cmp eq 0:i32 0:i32
  ret 37:i32
// CHECK-LABEL: block b3:
// CHECK-NEXT:   %b3:i0:i1 = cmp eq 0:i32 0:i32
// CHECK-NEXT:   ret 37:i32    
}
